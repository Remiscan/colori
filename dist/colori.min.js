function e(e){return e.length<2?`0${e}`:e}function t(e){let t=e;for(;t<0;)t+=360;for(;t>360;)t-=360;return t}function a(e,t="1"){return e?String(e):0===e?"0":t}const r=Object.freeze({__proto__:null,pad:e,angleToRange:t,pRound:function(e,t=5){let a="number"==typeof e?e:Number(e);return Number(parseFloat(a.toPrecision(t)))},toUnparsedAlpha:a});function s(e){return e.map((e=>Math.abs(e)<.04045?e/12.92:(Math.sign(e)||1)*Math.pow((Math.abs(e)+.055)/1.055,2.4)))}function n(e){return e.map((e=>Math.abs(e)>.0031308?(Math.sign(e)||1)*(1.055*Math.pow(Math.abs(e),1/2.4)-.055):12.92*e))}function o(e){const[t,a,r]=e,s=Math.sqrt(a**2+r**2);let n=180*Math.atan2(r,a)/Math.PI;for(;n<0;)n+=360;for(;n>360;)n-=360;return[t,s,n]}function i(e){const[t,a,r]=e;return[t,a*Math.cos(r*Math.PI/180),a*Math.sin(r*Math.PI/180)]}function l(e){const[t,a,r]=e;let s=.4122214708*t+.5363325363*a+.0514459929*r,n=.2119034982*t+.6806995451*a+.1073969566*r,o=.0883024619*t+.2817188376*a+.6299787005*r;s=Math.cbrt(s),n=Math.cbrt(n),o=Math.cbrt(o);return[.2104542553*s+.793617785*n+-.0040720468*o,1.9779984951*s+-2.428592205*n+.4505937099*o,.0259040371*s+.7827717662*n+-.808675766*o]}function c(e){const[t,a,r]=e;let s=t+.3963377774*a+.2158037573*r,n=t+-.1055613458*a+-.0638541728*r,o=t+-.0894841775*a+-1.291485548*r;s=s**3,n=n**3,o=o**3;return[4.0767416621*s+-3.3077115913*n+.2309699292*o,-1.2684380046*s+2.6097574011*n+-.3413193965*o,-.0041960863*s+-.7034186147*n+1.707614701*o]}function h(e){return o(e)}const u=Object.freeze({__proto__:null,srgb_to_lin_srgb:s,lin_srgb_to_srgb:n,lin_srgb_to_d65xyz:function(e){const[t,a,r]=e;return[.41239079926595934*t+.357584339383878*a+.1804807884018343*r,.21263900587151027*t+.715168678767756*a+.07219231536073371*r,.01933081871559182*t+.11919477979462598*a+.9505321522496607*r]},d65xyz_to_lin_srgb:function(e){const[t,a,r]=e;return[3.2409699419045226*t+-1.537383177570094*a+-.4986107602930034*r,-.9692436362808796*t+1.8759675015077202*a+.04155505740717559*r,.05563007969699366*t+-.20397695888897652*a+1.0569715142428786*r]},srgb_to_hsl:function(e){const[t,a,r]=e,s=Math.max(t,a,r),n=Math.min(t,a,r),o=s-n,i=(s+n)/2;let l,c;if(0===o)l=0;else switch(s){case t:l=(a-r)/o;break;case a:l=(r-t)/o+2;break;default:l=(t-a)/o+4}for(l*=60;l<0;)l+=360;for(;l>360;)l-=360;return c=0===i||1===i?0:i<=.5?o/(2*i):o/(2-2*i),[l,c,i]},hsl_to_srgb:function(e){const[t,a,r]=e,s=a*Math.min(r,1-r),n=e=>(e+t/30)%12,o=e=>r-s*Math.max(Math.min(n(e)-3,9-n(e),1),-1);return[o(0),o(8),o(4)]},hsl_to_hwb:function(e){const[t,a,r]=e;let s;const n=r+a*Math.min(r,1-r);return s=0===n?0:2-2*r/n,[t,(1-s)*n,1-n]},hwb_to_hsl:function(e){const[t,a,r]=e;let s,n=a,o=r;a+r>1&&(n=a/(a+r),o=r/(a+r));const i=1-o;let l;s=1===o?0:1-n/i;const c=i-i*s/2;return l=0===c||1===c?0:(i-c)/Math.min(c,1-c),[t,l,c]},displayp3_to_lin_displayp3:function(e){return s(e)},lin_displayp3_to_displayp3:function(e){return n(e)},lin_displayp3_to_d65xyz:function(e){const[t,a,r]=e;return[.4865709486482162*t+.26566769316909306*a+.1982172852343625*r,.2289745640697488*t+.6917385218365064*a+.079286914093745*r,0*t+.04511338185890264*a+1.043944368900976*r]},d65xyz_to_lin_displayp3:function(e){const[t,a,r]=e;return[2.493496911941425*t+-.9313836179191239*a+-.40271078445071684*r,-.8294889695615747*t+1.7626640603183463*a+.023624685841943577*r,.03584583024378447*t+-.07617238926804182*a+.9568845240076872*r]},prophotorgb_to_lin_prophotorgb:function(e){return e.map((e=>Math.abs(e)<=16/512?e/16:(Math.sign(e)||1)*Math.pow(e,1.8)))},lin_prophotorgb_to_prophotorgb:function(e){return e.map((e=>Math.abs(e)>=1/512?(Math.sign(e)||1)*Math.pow(Math.abs(e),1/1.8):16*e))},lin_prophotorgb_to_xyz:function(e){const[t,a,r]=e;return[.7977604896723027*t+.13518583717574031*a+.0313493495815248*r,.2880711282292934*t+.7118432178101014*a+8565396060525902e-20*r,0*t+0*a+.8251046025104601*r]},xyz_to_lin_prophotorgb:function(e){const[t,a,r]=e;return[1.3457989731028281*t+-.25558010007997534*a+-.05110628506753401*r,-.5446224939028347*t+1.5082327413132781*a+.02053603239147973*r,0*t+0*a+1.2119675456389454*r]},a98rgb_to_lin_a98rgb:function(e){return e.map((e=>(Math.sign(e)||1)*Math.pow(Math.abs(e),563/256)))},lin_a98rgb_to_a98rgb:function(e){return e.map((e=>(Math.sign(e)||1)*Math.pow(Math.abs(e),256/563)))},lin_a98rgb_to_d65xyz:function(e){const[t,a,r]=e;return[.5766690429101305*t+.1855582379065463*a+.1882286462349947*r,.29734497525053605*t+.6273635662554661*a+.07529145849399788*r,.02703136138641234*t+.07068885253582723*a+.9913375368376388*r]},d65xyz_to_lin_a98rgb:function(e){const[t,a,r]=e;return[2.0415879038107465*t+-.5650069742788596*a+-.34473135077832956*r,-.9692436362808795*t+1.8759675015077202*a+.04155505740717557*r,.013444280632031142*t+-.11836239223101838*a+1.0151749943912054*r]},rec2020_to_lin_rec2020:function(e){return e.map((e=>Math.abs(e)<.08124285829863151?e/4.5:(Math.sign(e)||1)*Math.pow(Math.abs(e)+1.09929682680944-1,1/.45)))},lin_rec2020_to_rec2020:function(e){const t=1.09929682680944;return e.map((e=>Math.abs(e)>.018053968510807?(Math.sign(e)||1)*(t*Math.pow(Math.abs(e),.45)-(t-1)):4.5*e))},lin_rec2020_to_d65xyz:function(e){const[t,a,r]=e;return[.6369580483012914*t+.14461690358620832*a+.1688809751641721*r,.2627002120112671*t+.6779980715188708*a+.05930171646986196*r,0*t+.028072693049087428*a+1.060985057710791*r]},d65xyz_to_lin_rec2020:function(e){const[t,a,r]=e;return[1.7166511879712674*t+-.35567078377639233*a+-.25336628137365974*r,-.6666843518324892*t+1.6164812366349395*a+.01576854581391113*r,.017639857445310783*t+-.042770613257808524*a+.9421031212354738*r]},xyz_to_lab:function(e){const t=[.96422,1,.82521],[a,r,s]=e.map(((e,a)=>e/t[a])),[n,o,i]=[a,r,s].map((e=>(e=>e>.008856451679035631?Math.cbrt(e):(903.2962962962963*e+16)/116)(e)));return[(116*o-16)/100,500*(n-o),200*(o-i)]},lab_to_xyz:function(e){const t=216/24389,a=24389/27,r=[.96422,1,.82521];let[s,n,o]=e;s*=100;const i=(s+16)/116,l=n/500+i,c=i-o/200;return[l**3>t?l**3:(116*l-16)/a,s>8?((s+16)/116)**3:s/a,c**3>t?c**3:(116*c-16)/a].map(((e,t)=>e*r[t]))},lab_to_lch:o,lch_to_lab:i,lin_srgb_to_oklab:l,oklab_to_lin_srgb:c,oklab_to_oklch:h,oklch_to_oklab:function(e){return i(e)},d65xyz_to_xyz:function(e){const[t,a,r]=e;return[1.0479298208405488*t+.022946793341019088*a+-.05019222954313557*r,.029627815688159344*t+.990434484573249*a+-.01707382502938514*r,-.009243058152591178*t+.015055144896577895*a+.7518742899580008*r]},xyz_to_d65xyz:function(e){const[t,a,r]=e;return[.9554734527042182*t+-.023098536874261423*a+.0632593086610217*r,-.028369706963208136*t+1.0099954580058226*a+.021041398966943008*r,.012314001688319899*t+-.020507696433477912*a+1.3303659366080753*r]}});class f{id;links;visited=!1;predecessor=null;constructor(e){this.id=e.id,this.links=e.links}visit(e=!0){this.visited=e}unvisit(){this.visited=!1}follow(e){this.predecessor=e}unfollow(){this.predecessor=null}}class g{nodes;constructor(e){this.nodes=e.map((e=>new f(e)))}getNode(e){const t=this.nodes.find((t=>t.id===e));if(null==t)throw`Node ${JSON.stringify(e)} does not exist`;return t}cleanUp(){for(const e of this.nodes)e.unvisit(),e.unfollow()}shortestPath(e,t){if(e===t)return[];const a=this.getNode(e),r=this.getNode(t),s=[a];a.visit();let n=!1;e:for(;s.length>0;){const e=s.shift();if(e.id===r.id){n=!0;break e}for(const t of e.links){const a=this.getNode(t);!1===a.visited&&(a.visit(),a.follow(e),s.push(a))}}if(!n)throw`No path found from ${JSON.stringify(a.id)} to ${JSON.stringify(r.id)}`;const o=[r];let i=r;for(;null!=i.predecessor;)o.push(i.predecessor),i=i.predecessor;return this.cleanUp(),o.reverse()}topologicalOrder(){const e=[],t=[...this.nodes],a=t=>{if(!0!==t.visited){if("temp"===t.visited)throw"The graph is not a directed acyclic graph";t.visit("temp");for(const e of t.links){const t=this.getNode(e);a(t)}t.visit(!0),e.push(t)}};for(;t.length>0;){const e=t.shift();a(e)}return this.cleanUp(),e.reverse()}}function b(e){const t=s(e);return.2126729*t[0]+.7151522*t[1]+.072175*t[2]}function p(e,t){const a=b(e),r=b(t);return(Math.max(a,r)+.05)/(Math.min(a,r)+.05)}function d(e,t){const a=[.2126729,.7151522,.072175];let[r,s]=[e,t].map((e=>(e=>e.reduce(((e,t,r)=>e+Math.pow(t,2.4)*a[r]),0))(e)));[r,s]=[r,s].map((e=>e>.03?e:e+Math.pow(.03-e,1.45)));if(Math.abs(r-s)<5e-4)return 0;let n;const o=(e,t,a,r)=>1.25*(Math.pow(e,a)-Math.pow(t,r)),i=.06;if(s>r){const e=o(s,r,.55,.58);n=e<.001?0:e<.078?.23076923076923084*e:e-i}else{const e=o(s,r,.62,.57);n=e>-.001?0:e>-.078?.23076923076923084*e:e+i}return 100*n}const m=Object.freeze({__proto__:null,luminance:b,WCAG2:p,APCA:d});function k(e,t){return e.reduce(((e,a,r)=>e+(a-t[r])**2),0)}function w([e,t,a],[r,s,n]){const o=100*e,i=100*r,l=(Math.sqrt(t**2+a**2)+Math.sqrt(s**2+n**2))/2,c=.5*(1-Math.sqrt(l**7/(l**7+25**7))),h=(1+c)*t,u=(1+c)*s,f=Math.sqrt(h**2+a**2),g=Math.sqrt(u**2+n**2);let b=0===f?0:180*Math.atan2(a,h)/Math.PI,p=0===g?0:180*Math.atan2(n,u)/Math.PI;for(;b<0;)b+=360;for(;b>360;)b-=360;for(;p<0;)p+=360;for(;p>360;)p-=360;const d=i-o,m=g-f,k=f*g==0?0:Math.abs(p-b)<=180?p-b:p-b>180?p-b-360:p-b+360,w=2*Math.sqrt(f*g)*Math.sin(Math.PI/180*(k/2)),$=(o+i)/2,y=(f+g)/2,M=f*g==0?b+p:Math.abs(p-b)<=180?(b+p)/2:b+p>=360?(b+p-360)/2:(b+p+360)/2,_=1-.17*Math.cos(Math.PI/180*(M-30))+.24*Math.cos(Math.PI/180*(2*M))+.32*Math.cos(Math.PI/180*(3*M+6))-.2*Math.cos(Math.PI/180*(4*M-63)),v=30*Math.exp(-1*((M-275)/25)**2),x=2*Math.sqrt(y**7/(y**7+25**7)),S=1+.015*($-50)**2/Math.sqrt(20+($-50)**2),O=1+.045*y,E=1+.015*y*_,T=-1*Math.sin(Math.PI/180*(2*v))*x;return Math.sqrt((d/S)**2+(m/O)**2+(w/E)**2+T*(m/O)*(w/E))}const $=Object.freeze({__proto__:null,euclidean:k,CIEDE2000:w});function y(e,t){let a,r,s,n,o,i,l,c;-1.88170328*e-.80936493*t>1?(a=1.19086277,r=1.76576728,s=.59662641,n=.75515197,o=.56771245,i=4.0767416621,l=-3.3077115913,c=.2309699292):1.81444104*e-1.19445276*t>1?(a=.73956515,r=-.45954404,s=.08285427,n=.1254107,o=.14503204,i=-1.2684380046,l=2.6097574011,c=-.3413193965):(a=1.35733652,r=-.00915799,s=-1.1513021,n=-.50559606,o=.00692167,i=-.0041960863,l=-.7034186147,c=1.707614701);let h=a+r*e+s*t+n*e*e+o*e*t;const u=.3963377774*e+.2158037573*t,f=-.1055613458*e-.0638541728*t,g=-.0894841775*e-1.291485548*t,[b,p,d]=[u,f,g].map((e=>1+h*e)),[m,k,w]=[b,p,d].map((e=>e**3)),$=i*m+l*k+c*w,y=i*(3*u*b*b)+l*(3*f*p*p)+c*(3*g*d*d);return h-=$*y/(y*y-.5*$*(i*(6*u*u*b)+l*(6*f*f*p)+c*(6*g*g*d))),h}function M(e,t){const a=y(e,t),r=c([1,a*e,a*t]),s=Math.cbrt(1/Math.max(...r));return[s,s*a]}function _(e,t,a,r,s){const[n,o]=M(e,t);let i;if((a-s)*o-(n-s)*r<=0)i=o*s/(r*n+o*(s-a));else{i=o*(s-1)/(r*(n-1)+o*(s-a));const l=a-s,c=r,h=.3963377774*e+.2158037573*t,u=-.1055613458*e-.0638541728*t,f=-.0894841775*e-1.291485548*t,[g,b,p]=[h,u,f].map((e=>l+c*e));for(let e=0;e<2;e++){const e=s*(1-i)+i*a,t=i*r,[n,o,l]=[h,u,f].map((a=>e+t*a)),[c,d,m]=[n,o,l].map((e=>e**3)),k=3*g*n*n,w=3*b*o*o,$=3*p*l*l,y=6*g*g*n,M=6*b*b*o,_=6*p*p*l,v=(e,t,a)=>{const r=e*c+t*d+a*m-1,s=e*k+t*w+a*$,n=s/(s*s-.5*r*(e*y+t*M+a*_));return n>=0?-r*n:Number.MAX_VALUE},x=v(4.0767416621,-3.3077115913,.2309699292),S=v(-1.2684380046,2.6097574011,-.3413193965),O=v(-.0041960863,-.7034186147,1.707614701);i+=Math.min(x,S,O)}}return i}function v(e){if(e.every((e=>e>0&&e<1)))return e;const[t,a,r]=l(s(e)),[o,i,u]=h([t,a,r]),f=Math.max(1e-5,i),g=a/f,b=r/f,p=t-.5,d=.5+Math.abs(p)+.05*f,m=.5*(1+Math.sign(p)*(d-Math.sqrt(d*d-2*Math.abs(p)))),k=_(g,b,t,f,m),w=k*f;return n(c([m*(1-k)+k*t,w*g,w*b]))}const x=Object.freeze({__proto__:null,maxSaturation:y,cusp:M,gamutIntersection:_,clip:v}),S=[{id:"srgb",whitepoint:"d65",CSSformat:"rgb",gamut:[[0,1],[0,1],[0,1]],links:["lin_srgb","hsl"]},{id:"lin_srgb",gamut:[[0,1],[0,1],[0,1]],links:["srgb","d65xyz","oklab"]},{id:"hsl",whitepoint:"d65",CSSformat:"hsl",gamut:[[0,360],[0,1],[0,1]],links:["srgb","hwb"]},{id:"hwb",whitepoint:"d65",CSSformat:"hwb",gamut:[[0,360],[0,1],[0,1]],links:["hsl"]},{id:"lab",whitepoint:"d50",CSSformat:"lab",gamut:[[0,4],[-1/0,1/0],[-1/0,1/0]],links:["xyz","lch"]},{id:"lch",whitepoint:"d50",CSSformat:"lch",gamut:[[0,4],[0,1/0],[0,360]],links:["lab"]},{id:"xyz",whitepoint:"d50",CSSformat:"color",gamut:[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]],links:["lab","d65xyz","lin_prophoto-rgb"]},{id:"d65xyz",whitepoint:"d65",gamut:[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]],links:["xyz","lin_srgb","lin_display-p3","lin_a98-rgb","lin_rec2020"]},{id:"display-p3",whitepoint:"d65",CSSformat:"color",gamut:[[0,1],[0,1],[0,1]],links:["lin_display-p3"]},{id:"lin_display-p3",gamut:[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]],links:["display-p3","d65xyz"]},{id:"a98-rgb",whitepoint:"d65",CSSformat:"color",gamut:[[0,1],[0,1],[0,1]],links:["lin_a98-rgb"]},{id:"lin_a98-rgb",gamut:[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]],links:["a98-rgb","d65xyz"]},{id:"prophoto-rgb",whitepoint:"d50",CSSformat:"color",gamut:[[0,1],[0,1],[0,1]],links:["lin_prophoto-rgb"]},{id:"lin_prophoto-rgb",gamut:[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]],links:["prophoto-rgb","xyz"]},{id:"rec2020",whitepoint:"d65",CSSformat:"color",gamut:[[0,1],[0,1],[0,1]],links:["lin_rec2020"]},{id:"lin_rec2020",gamut:[[-1/0,1/0],[-1/0,1/0],[-1/0,1/0]],links:["rec2020","d65xyz"]},{id:"oklab",whitepoint:"d65",gamut:[[0,4],[-1/0,1/0],[-1/0,1/0]],links:["lin_srgb","oklch"]},{id:"oklch",whitepoint:"d65",gamut:[[0,4],[0,1/0],[0,360]],links:["oklab"]}],O=new Map([["aliceblue","f0f8ff"],["antiquewhite","faebd7"],["aqua","00ffff"],["aquamarine","7fffd4"],["azure","f0ffff"],["beige","f5f5dc"],["bisque","ffe4c4"],["black","000000"],["blanchedalmond","ffebcd"],["blue","0000ff"],["blueviolet","8a2be2"],["brown","a52a2a"],["burlywood","deb887"],["cadetblue","5f9ea0"],["chartreuse","7fff00"],["chocolate","d2691e"],["coral","ff7f50"],["cornflowerblue","6495ed"],["cornsilk","fff8dc"],["crimson","dc143c"],["cyan","00ffff"],["darkblue","00008b"],["darkcyan","008b8b"],["darkgoldenrod","b8860b"],["darkgray","a9a9a9"],["darkgrey","a9a9a9"],["darkgreen","006400"],["darkkhaki","bdb76b"],["darkmagenta","8b008b"],["darkolivegreen","556b2f"],["darkorange","ff8c00"],["darkorchid","9932cc"],["darkred","8b0000"],["darksalmon","e9967a"],["darkseagreen","8fbc8f"],["darkslateblue","483d8b"],["darkslategray","2f4f4f"],["darkslategrey","2f4f4f"],["darkturquoise","00ced1"],["darkviolet","9400d3"],["deeppink","ff1493"],["deepskyblue","00bfff"],["dimgray","696969"],["dimgrey","696969"],["dodgerblue","1e90ff"],["firebrick","b22222"],["floralwhite","fffaf0"],["forestgreen","228b22"],["fuchsia","ff00ff"],["gainsboro","dcdcdc"],["ghostwhite","f8f8ff"],["gold","ffd700"],["goldenrod","daa520"],["gray","808080"],["grey","808080"],["green","008000"],["greenyellow","adff2f"],["honeydew","f0fff0"],["hotpink","ff69b4"],["indianred","cd5c5c"],["indigo","4b0082"],["ivory","fffff0"],["khaki","f0e68c"],["lavender","e6e6fa"],["lavenderblush","fff0f5"],["lawngreen","7cfc00"],["lemonchiffon","fffacd"],["lightblue","add8e6"],["lightcoral","f08080"],["lightcyan","e0ffff"],["lightgoldenrodyellow","fafad2"],["lightgray","d3d3d3"],["lightgrey","d3d3d3"],["lightgreen","90ee90"],["lightpink","ffb6c1"],["lightsalmon","ffa07a"],["lightseagreen","20b2aa"],["lightskyblue","87cefa"],["lightslategray","778899"],["lightslategrey","778899"],["lightsteelblue","b0c4de"],["lightyellow","ffffe0"],["lime","00ff00"],["limegreen","32cd32"],["linen","faf0e6"],["magenta","ff00ff"],["maroon","800000"],["mediumaquamarine","66cdaa"],["mediumblue","0000cd"],["mediumorchid","ba55d3"],["mediumpurple","9370d8"],["mediumseagreen","3cb371"],["mediumslateblue","7b68ee"],["mediumspringgreen","00fa9a"],["mediumturquoise","48d1cc"],["mediumvioletred","c71585"],["midnightblue","191970"],["mintcream","f5fffa"],["mistyrose","ffe4e1"],["moccasin","ffe4b5"],["navajowhite","ffdead"],["navy","000080"],["oldlace","fdf5e6"],["olive","808000"],["olivedrab","6b8e23"],["orange","ffa500"],["orangered","ff4500"],["orchid","da70d6"],["palegoldenrod","eee8aa"],["palegreen","98fb98"],["paleturquoise","afeeee"],["palevioletred","d87093"],["papayawhip","ffefd5"],["peachpuff","ffdab9"],["peru","cd853f"],["pink","ffc0cb"],["plum","dda0dd"],["powderblue","b0e0e6"],["purple","800080"],["rebeccapurple","663399"],["red","ff0000"],["rosybrown","bc8f8f"],["royalblue","4169e1"],["saddlebrown","8b4513"],["salmon","fa8072"],["sandybrown","f4a460"],["seagreen","2e8b57"],["seashell","fff5ee"],["sienna","a0522d"],["silver","c0c0c0"],["skyblue","87ceeb"],["slateblue","6a5acd"],["slategray","708090"],["slategrey","708090"],["snow","fffafa"],["springgreen","00ff7f"],["steelblue","4682b4"],["tan","d2b48c"],["teal","008080"],["thistle","d8bfd8"],["tomato","ff6347"],["turquoise","40e0d0"],["violet","ee82ee"],["wheat","f5deb3"],["white","ffffff"],["whitesmoke","f5f5f5"],["yellow","ffff00"],["yellowgreen","9acd32"]]),E="(?:\\-|\\+)?(?:[0-9]+(?:\\.[0-9]+)?|\\.[0-9]+)(?:(?:e|E)(?:\\-|\\+)?[0-9]+)?",T={number:E,percentage:E+"%",numberOrPercentage:E+"%?",angle:E+"(?:deg|grad|rad|turn)?"},I=[{id:"hex",syntaxes:[/^#([a-fA-F0-9]{1})([a-fA-F0-9]{1})([a-fA-F0-9]{1})$/,/^#([a-fA-F0-9]{1})([a-fA-F0-9]{1})([a-fA-F0-9]{1})([a-fA-F0-9]{1})$/,/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/]},{id:"rgb",syntaxes:[new RegExp(`^rgba?\\((${T.number}), ?(${T.number}), ?(${T.number})\\)$`),new RegExp(`^rgba?\\((${T.number}), ?(${T.number}), ?(${T.number}), ?(${T.numberOrPercentage})\\)$`),new RegExp(`^rgba?\\((${T.percentage}), ?(${T.percentage}), ?(${T.percentage})\\)$`),new RegExp(`^rgba?\\((${T.percentage}), ?(${T.percentage}), ?(${T.percentage}), ?(${T.numberOrPercentage})\\)$`),new RegExp(`^rgba?\\((${T.number}) (${T.number}) (${T.number})\\)$`),new RegExp(`^rgba?\\((${T.number}) (${T.number}) (${T.number}) ?\\/ ?(${T.numberOrPercentage})\\)$`),new RegExp(`^rgba?\\((${T.percentage}) (${T.percentage}) (${T.percentage})\\)$`),new RegExp(`^rgba?\\((${T.percentage}) (${T.percentage}) (${T.percentage}) ?\\/ ?(${T.numberOrPercentage})\\)$`)]},{id:"hsl",syntaxes:[new RegExp(`^hsla?\\((${T.angle}), ?(${T.percentage}), ?(${T.percentage})\\)$`),new RegExp(`^hsla?\\((${T.angle}), ?(${T.percentage}), ?(${T.percentage}), ?(${T.numberOrPercentage})\\)$`),new RegExp(`^hsla?\\((${T.angle}) (${T.percentage}) (${T.percentage})\\)$`),new RegExp(`^hsla?\\((${T.angle}) (${T.percentage}) (${T.percentage}) ?\\/ ?(${T.numberOrPercentage})\\)$`)]},{id:"hwb",syntaxes:[new RegExp(`^hwb\\((${T.angle}) (${T.percentage}) (${T.percentage})\\)$`),new RegExp(`^hwb\\((${T.angle}) (${T.percentage}) (${T.percentage}) ?\\/ ?(${T.numberOrPercentage})\\)$`)]},{id:"lab",syntaxes:[new RegExp(`^lab\\((${T.percentage}) (${T.number}) (${T.number})\\)$`),new RegExp(`^lab\\((${T.percentage}) (${T.number}) (${T.number}) ?\\/ ?(${T.numberOrPercentage})\\)$`)]},{id:"lch",syntaxes:[new RegExp(`^lch\\((${T.percentage}) (${T.number}) (${T.angle})\\)$`),new RegExp(`^lch\\((${T.percentage}) (${T.number}) (${T.angle}) ?\\/ ?(${T.numberOrPercentage})\\)$`)]},{id:"oklab",syntaxes:[new RegExp(`^oklab\\((${T.percentage}) (${T.number}) (${T.number})\\)$`),new RegExp(`^oklab\\((${T.percentage}) (${T.number}) (${T.number}) ?\\/ ?(${T.numberOrPercentage})\\)$`)]},{id:"oklch",syntaxes:[new RegExp(`^oklch\\((${T.percentage}) (${T.number}) (${T.angle})\\)$`),new RegExp(`^oklch\\((${T.percentage}) (${T.number}) (${T.angle}) ?\\/ ?(${T.numberOrPercentage})\\)$`)]},{id:"color",syntaxes:[new RegExp(`^color\\(([a-zA-Z0-9_-]+?) (${T.number}) (${T.number}) (${T.number})\\)$`),new RegExp(`^color\\(([a-zA-Z0-9_-]+?) (${T.number}) (${T.number}) (${T.number}) ?\\/ ?(${T.numberOrPercentage})\\)$`)]},{id:"name",syntaxes:[/^[A-Za-z]+$/]}],N=Object.freeze({__proto__:null,RegExps:T,Formats:I});class R{r=0;g=0;b=0;a=0;constructor(e){if(e instanceof R)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;else if(!Array.isArray(e)||3!=e.length&&4!=e.length){if("string"!=typeof e)throw`Couleur objects can only be created from a string, an array of parsed values, or another Couleur object ; this is not one: ${JSON.stringify(e)}`;{const t=R.matchSyntax(e.trim());switch(t.id){case"hex":this.setHex([t.data[1],t.data[2],t.data[3],a(t.data[4],"ff")]);break;case"rgb":case"hsl":case"hwb":case"lab":case"lch":case"oklab":case"oklch":{const e=[t.data[1],t.data[2],t.data[3],a(t.data[4])],r=[...R.propertiesOf(t.id),"a"],s=R.getSpace(t.id);this.set(e,r,s)}break;case"color":this.setColor(t.data[1],[t.data[2],t.data[3],t.data[4],a(t.data[5])]);break;default:throw`${JSON.stringify(e)} is not a valid color format`}}}else[this.r,this.g,this.b]=R.toGamut("srgb",e.slice(0,3),"srgb",{method:"naive"}),this.a=Math.max(0,Math.min(Number(a(e[3])),1))}static makeInstance(e){return e instanceof R?e:new R(e)}static matchSyntax(e){const t=e.slice(0,3);let a;if("#"===t.slice(0,1))a=R.formats[0];else switch(t){case"rgb":a=R.formats[1];break;case"hsl":a=R.formats[2];break;case"hwb":a=R.formats[3];break;case"lab":a=R.formats[4];break;case"lch":a=R.formats[5];break;case"okl":e.startsWith("oklab")?a=R.formats[6]:e.startsWith("oklch")&&(a=R.formats[7]);break;case"col":a=R.formats[8];break;default:a=R.formats[9]}if(null==a)throw"No matching format";for(const t of a.syntaxes){const r=e.match(t);if(null!=r&&r[0]===e){if("name"===a.id){if("transparent"===e)return{id:"rgb",data:["","0","0","0","0"]};const t=R.couleursNommees.get(e.toLowerCase())||null;return R.matchSyntax(`#${t}`)}return{id:a.id,data:r}}}throw`${JSON.stringify(e)} is not a valid color format`}static parse(e,a=null,{clamp:r=!0}={}){const s=String(e),n=parseFloat(s);try{switch(a){case"a":if(new RegExp("^"+T.percentage+"$").test(s))return r?Math.max(0,Math.min(n/100,1)):n/100;if(new RegExp("^"+T.number+"$").test(s))return r?Math.max(0,Math.min(n,1)):n;throw"invalid";case"r":case"g":case"b":if(new RegExp("^"+T.percentage+"$").test(s))return r?Math.max(0,Math.min(n/100,1)):n/100;if(new RegExp("^"+T.number+"$").test(s))return r?Math.max(0,Math.min(n/255,1)):n/255;throw"invalid";case"h":case"cieh":case"okh":{let a=n;if(new RegExp("^"+T.number+"$").test(s))return t(a);if(new RegExp("^"+T.angle+"$").test(s)){if("deg"===s.slice(-3));else if("grad"===s.slice(-4))a=360*a/400;else if("rad"===s.slice(-3))a=180*a/Math.PI;else{if("turn"!==s.slice(-4))throw`Invalid angle value: ${JSON.stringify(e)}`;a*=360}return t(a)}throw"invalid"}case"s":case"l":case"w":case"bk":case"ciel":case"okl":if(new RegExp("^"+T.percentage+"$").test(s))return r?Math.max(0,Math.min(n/100,1)):n/100;throw"invalid";case"ciea":case"cieb":if(new RegExp("^"+T.number+"$").test(s))return n;throw"invalid";case"ciec":if(new RegExp("^"+T.number+"$").test(s))return r?Math.max(0,n):n;throw"invalid";case"oka":case"okb":case"okc":if(new RegExp("^"+T.number+"$").test(s))return n/100;throw"invalid";default:if(new RegExp("^"+T.percentage+"$").test(s))return n/100;if(new RegExp("^"+T.number+"$").test(s))return n;throw"invalidest"}}catch(t){throw"invalid"===t?`Invalid ${JSON.stringify(a)} value: ${JSON.stringify(e)}`:`Invalid arbitrary value: ${JSON.stringify(e)}`}}static unparse(e,t,{precision:a=0}={}){switch(t){case"r":case"g":case"b":return null===a?""+255*e:""+Math.round(10**a*255*e)/10**a;case"s":case"l":case"w":case"bk":case"ciel":case"okl":return null===a?100*e+"%":Math.round(10**a*100*e)/10**a+"%";case"oka":case"okb":case"okc":return null===a?""+100*e:""+Math.round(10**a*100*e)/10**a;case"a":return null===a?`${e}`:""+Math.round(10**Math.max(a,2)*e)/10**Math.max(a,2);default:return null===a?`${e}`:""+Math.round(10**a*e)/10**a}}set(e,t,r,{parsed:s=!1}={}){const n=R.getSpace(r),o=s?e.map((e=>Number(e))):t.map(((t,a)=>R.parse(e[a],t)));[this.r,this.g,this.b]=R.convert(n,"srgb",o),this.a=R.parse(a(e[3]),"a")}expr(e,{precision:t=0,clamp:a=!0}={}){const r="string"==typeof e?e.replace("color-",""):e,s=R.getSpace(r);let n=this.valuesTo(s);a&&(n=R.toGamut(s,n,s));const o=Number(R.unparse(this.a,"a",{precision:t}));if(n=[...n,o],"color"===e.slice(0,5)){let e=`color(${s.id}`;for(const[a,r]of Object.entries(n))if(Number(a)===n.length-1){if(o>=1)break;e+=` / ${o}`}else e+=` ${null===t?r:Math.round(10**t*r)/10**t}`;return e+=")",e}const i=R.propertiesOf(e),[l,c,h]=i.map(((e,a)=>R.unparse(n[a],e,{precision:t})));switch(e){case"rgb":case"rgba":case"hsl":case"hsla":return e.length>3&&"a"===e.slice(-1)||o<1?`${e}(${l}, ${c}, ${h}, ${o})`:`${e}(${l}, ${c}, ${h})`;default:return o<1?`${e}(${l} ${c} ${h} / ${o})`:`${e}(${l} ${c} ${h})`}}static makeExpr(e,t,a,r={}){const s="string"==typeof e?e.replace("color-",""):e,n=[...R.convert(a,s,t.slice(0,3)),t[3]];return new R(n).expr(e,r)}get values(){return[this.r,this.g,this.b]}get name(){if(1===this.a){const e=R.couleursNommees,[t,a,r]=[255*this.r,255*this.g,255*this.b],s=255*.02;for(const[n,o]of e.entries()){const[e,i,l]=[parseInt(`${o[0]}${o[1]}`,16),parseInt(`${o[2]}${o[3]}`,16),parseInt(`${o[4]}${o[5]}`,16)];if(Math.abs(e-t)+Math.abs(i-a)+Math.abs(l-r)<s)return n}return null}return 0===this.a?"transparent":null}get exactName(){if(1===this.a){const e=R.couleursNommees,t=this.hex.slice(1);for(const[a,r]of e.entries())if(r===t)return a;return null}return 0===this.a?"transparent":null}setHex(e){let[t,a,r]=e.map((e=>String(e)));const s=[t,a,r,String(e[3])||"ff"].map((e=>1===e.length?e.repeat(2):e)).map((e=>parseInt(e,16)));this.set(s,["r","g","b"],"srgb")}get hex(){const t=[...R.toGamut("srgb",this.values),this.a].map((t=>e(Math.round(255*t).toString(16))));return this.a<1?`#${t[0]}${t[1]}${t[2]}${t[3]}`:`#${t[0]}${t[1]}${t[2]}`}get rgb(){return this.expr("rgb",{precision:2})}get rgba(){return this.rgb}get hsl(){return this.expr("hsl",{precision:2})}get hsla(){return this.hsl}get hwb(){return this.expr("hwb",{precision:2})}get lab(){return this.expr("lab",{precision:2})}get lch(){return this.expr("lch",{precision:2})}get oklab(){return this.expr("oklab",{precision:2})}get oklch(){return this.expr("oklch",{precision:2})}setColor(e,t){let a=t.slice(0,3).map((e=>R.parse(e)));const r=R.parse(t[3]);switch(e){case"srgb":case"display-p3":case"a98-rgb":case"prophoto-rgb":case"rec2020":case"oklab":case"oklch":case"xyz":a=R.convert(e,"srgb",a);break;default:if(!e.startsWith("--"))throw`The ${JSON.stringify(e)} color space is not supported`;{const t=e.substring(2);a=R.convert(t,"srgb",a)}}const s=[...a,r];return this.set(s,[null,null,null],"srgb")}set red(e){this.r=e}set green(e){this.g=e}set blue(e){this.b=e}set alpha(e){this.a=e}set opacity(e){this.a=e}set h(e){const[t,a,r]=this.valuesTo("hsl"),s=[...R.propertiesOf("hsl"),"a"],n=[e,a,r,this.a];this.set(n,s,"hsl",{parsed:!0})}set hue(e){this.h=e}set s(e){const[t,a,r]=this.valuesTo("hsl"),s=[...R.propertiesOf("hsl"),"a"],n=[t,e,r,this.a];this.set(n,s,"hsl",{parsed:!0})}set saturation(e){this.s=e}set l(e){const[t,a,r]=this.valuesTo("hsl"),s=[...R.propertiesOf("hsl"),"a"],n=[t,a,e,this.a];this.set(n,s,"hsl",{parsed:!0})}set lightness(e){this.l=e}set w(e){const[t,a,r]=this.valuesTo("hwb"),s=[...R.propertiesOf("hwb"),"a"],n=[t,e,r,this.a];this.set(n,s,"hwb",{parsed:!0})}set whiteness(e){this.w=e}set bk(e){const[t,a,r]=this.valuesTo("hwb"),s=[...R.propertiesOf("hwb"),"a"],n=[t,a,e,this.a];this.set(n,s,"hwb",{parsed:!0})}set blackness(e){this.bk=e}set ciel(e){const[t,a,r]=this.valuesTo("lab"),s=[...R.propertiesOf("lab"),"a"],n=[e,a,r,this.a];this.set(n,s,"lab",{parsed:!0})}set CIElightness(e){this.ciel=e}set ciea(e){const[t,a,r]=this.valuesTo("lab"),s=[...R.propertiesOf("lab"),"a"],n=[t,e,r,this.a];this.set(n,s,"lab",{parsed:!0})}set cieb(e){const[t,a,r]=this.valuesTo("lab"),s=[...R.propertiesOf("lab"),"a"],n=[t,a,e,this.a];this.set(n,s,"lab",{parsed:!0})}set ciec(e){const[t,a,r]=this.valuesTo("lch"),s=[...R.propertiesOf("lch"),"a"],n=[t,e,r,this.a];this.set(n,s,"lch",{parsed:!0})}set CIEchroma(e){this.ciec=e}set cieh(e){const[t,a,r]=this.valuesTo("lch"),s=[...R.propertiesOf("lch"),"a"],n=[t,a,e,this.a];this.set(n,s,"lch",{parsed:!0})}set CIEhue(e){this.cieh=e}set okl(e){const[t,a,r]=this.valuesTo("oklab"),s=[...R.propertiesOf("oklab"),"a"],n=[e,a,r,this.a];this.set(n,s,"oklab",{parsed:!0})}set OKlightness(e){this.okl=e}set oka(e){const[t,a,r]=this.valuesTo("oklab"),s=[...R.propertiesOf("oklab"),"a"],n=[t,e,r,this.a];this.set(n,s,"oklab",{parsed:!0})}set okb(e){const[t,a,r]=this.valuesTo("oklab"),s=[...R.propertiesOf("oklab"),"a"],n=[t,a,e,this.a];this.set(n,s,"oklab",{parsed:!0})}set okc(e){const[t,a,r]=this.valuesTo("oklch"),s=[...R.propertiesOf("oklch"),"a"],n=[t,e,r,this.a];this.set(n,s,"oklch",{parsed:!0})}set OKchroma(e){this.okc=e}set okh(e){const[t,a,r]=this.valuesTo("oklch"),s=[...R.propertiesOf("oklch"),"a"],n=[t,a,e,this.a];this.set(n,s,"oklch",{parsed:!0})}set OKhue(e){this.okh=e}get red(){return this.r}get green(){return this.g}get blue(){return this.b}get alpha(){return this.a}get opacity(){return this.a}get h(){return this.valuesTo("hsl")[0]}get hue(){return this.h}get s(){return this.valuesTo("hsl")[1]}get saturation(){return this.s}get l(){return this.valuesTo("hsl")[2]}get lightness(){return this.l}get w(){return this.valuesTo("hwb")[1]}get whiteness(){return this.w}get bk(){return this.valuesTo("hwb")[2]}get blackness(){return this.bk}get ciel(){return this.valuesTo("lab")[0]}get CIElightness(){return this.ciel}get ciea(){return this.valuesTo("lab")[1]}get cieb(){return this.valuesTo("lab")[2]}get ciec(){return this.valuesTo("lch")[1]}get CIEchroma(){return this.ciec}get cieh(){return this.valuesTo("lch")[2]}get CIEhue(){return this.cieh}get okl(){return this.valuesTo("oklab")[0]}get OKlightness(){return this.okl}get oka(){return this.valuesTo("oklab")[1]}get okb(){return this.valuesTo("oklab")[2]}get okc(){return this.valuesTo("oklch")[1]}get OKchroma(){return this.okc}get okh(){return this.valuesTo("oklch")[2]}get OKhue(){return this.okh}set luminance(e){const[t,a,r]=this.values,s=this.luminance,n=R.parse(e,"a",{clamp:!0});if(0===s)this.r=n,this.g=n,this.b=n;else{const e=n/s;this.r=e*t,this.g=e*a,this.b=e*r}}get luminance(){if(this.a<1)throw"The luminance of a transparent color would be meaningless";return b(this.values)}static convert(e,t,a){if(typeof e==typeof t&&e===t||"string"==typeof e&&"string"!=typeof t&&e===t.id||"string"!=typeof e&&"string"==typeof t&&e.id===t)return a;const r=R.getSpace(e),s=R.getSpace(t);let n;const o=new g(R.colorSpaces);try{n=o.shortestPath(r.id,s.id).map((e=>e.id))}catch(e){switch(e){case`Node ${r.id} does not exist`:throw`${JSON.stringify(r.id)} is not a supported color space`;case`Node ${s.id} does not exist`:throw`${JSON.stringify(s.id)} is not a supported color space`;case`No path found from ${r.id} to ${s.id}`:throw`Conversion from ${JSON.stringify(r.id)} space to ${JSON.stringify(s.id)} space is impossible`;default:throw e}}let i=a;for(;n.length>1;){const e=`${n.shift()}_to_${n[0]}`.replace(/-/g,""),t=u[e];if("function"!=typeof t)throw`Conversion function ${e} does not exist`;i=t(i)}return i}valuesTo(e,{clamp:t=!1}={}){const a=R.getSpace(e);let r=R.convert("srgb",a,this.values);return t&&(r=R.toGamut(a,r)),r}static inGamut(e,t,a="srgb",{tolerance:r=1e-4}={}){const s=R.getSpace(e);return R.convert(a,s,t).every(((e,t)=>e>=s.gamut[t][0]-r&&e<=s.gamut[t][1]+r))}inGamut(e,t={}){return R.inGamut(e,this.values,"srgb",t)}static toGamut(e,t,a="srgb",{method:r="oklab"}={}){const s=R.getSpace(e),n=R.getSpace(a);if(R.inGamut(s,t,n,{tolerance:0}))return t;let o,i;switch(r){case"oklab":i=R.getSpace("srgb");o=v(R.convert(n,i,t));break;case"chroma":{i=R.getSpace("lch");let e=R.convert(n,i,t);const a=.01;let r=0,l=e[1];for(e[1]=e[1]/2;l-r>a;){const t=R.toGamut(s,e,i,{method:"naive"});R.distance(t,e,{method:"CIEDE2000"})<2+a?r=e[1]:l=e[1],e[1]=(r+l)/2}o=e;break}default:i=s;o=R.convert(n,i,t).map(((e,t)=>Math.max(s.gamut[t][0],Math.min(e,s.gamut[t][1]))))}return"naive"!==r&&(o=R.toGamut(s,o,i,{method:"naive"})),R.convert(i,n,o)}toGamut(e){return R.toGamut(e,this.values,"srgb")}change(e,t,{action:a=null}={}){const r="replace"===a,s="scale"===a,n=s?R.parse(t):R.parse(t,e,{clamp:!1}),o=new R(this),i=this[e],l=r?n:s?i*n:i+n;return o[e]=l,o}replace(e,t){return this.change(e,t,{action:"replace"})}scale(e,t){return this.change(e,t,{action:"scale"})}complement(){return this.change("h",180)}negative(){return new R(`rgb(${255*(1-this.r)}, ${255*(1-this.g)}, ${255*(1-this.b)}, ${this.a})`)}invert(){return this.negative()}greyscale(){const e=255*this.replace("a",1).luminance;return new R(`rgb(${e}, ${e}, ${e}, ${this.a})`)}grayscale(){return this.greyscale()}sepia(){const e=Math.min(.393*this.r+.769*this.g+.189*this.b,1),t=Math.min(.349*this.r+.686*this.g+.168*this.b,1),a=Math.min(.272*this.r+.534*this.g+.131*this.b,1);return new R(`rgb(${255*e}, ${255*t}, ${255*a}, ${this.a})`)}static blend(e,t,a){const r=R.makeInstance(e),s=R.makeInstance(t);if(null!=a&&(s.a=R.parse(a,"a")),0===s.a)return r;if(1===s.a)return s;const n=s.a+r.a*(1-s.a),o=(s.r*s.a+r.r*r.a*(1-s.a))/n,i=(s.g*s.a+r.g*r.a*(1-s.a))/n,l=(s.b*s.a+r.b*r.a*(1-s.a))/n;return new R([o,i,l,n])}static blendAll(...e){if(e.length<2)throw"You need at least 2 colors to blend";const t=e.shift(),a=e.shift();if(null==t||null==a)throw"Cannot blend undefined color";const r=R.blend(t,a);return 0===e.length?r:R.blendAll(r,...e)}blend(e,t){return R.blend(this,e,t)}blendAll(...e){return R.blendAll(this,...e)}static unblend(e,t,a){const r=R.makeInstance(e),s=R.makeInstance(t);if(null!=a&&(s.a=R.parse(a,"a")),1===s.a)throw`Overlay color ${JSON.stringify(s.rgb)} isn't transparent, so the background it was blended onto could have been any color`;if(0===s.a)return r;if(r.a<s.a)return null;if(r.a===s.a)return R.same(r,s)?new R([0,0,0,0]):null;{const e=(r.a-s.a)/(1-s.a),t=(r.r*r.a-s.r*s.a)/(e*(1-s.a)),a=(r.g*r.a-s.g*s.a)/(e*(1-s.a)),n=(r.b*r.a-s.b*s.a)/(e*(1-s.a));if(!R.inGamut("srgb",[t,a,n],"srgb",{tolerance:1/255}))return null;const o=R.toGamut("srgb",[t,a,n],"srgb",{method:"naive"});return new R([...o,e])}}static unblendAll(...e){if(e.length<2)throw"You need at least 2 colors to unblend";const t=e.shift(),a=e.shift();if(null==t||null==a)throw"Cannot unblend undefined color";const r=R.unblend(t,a);return null==r?null:0===e.length?r:R.unblendAll(r,...e)}unblend(e,t){return R.unblend(this,e,t)}unblendAll(...e){return R.unblendAll(this,...e)}static whatToBlend(e,t,a=[],{ignoreTransparent:r=!1}={}){const s=R.makeInstance(e),n=R.makeInstance(t);let o=[];const i=e=>{const t=(n.r*n.a-s.r*s.a*(1-e))/e,a=(n.g*n.a-s.g*s.a*(1-e))/e,r=(n.b*n.a-s.b*s.a*(1-e))/e;if(!R.inGamut("srgb",[t,a,r],"srgb",{tolerance:1/255}))throw"This color doesn't exist";const o=R.toGamut("srgb",[t,a,r],"srgb",{method:"naive"});return new R([...o,e])},l=[a].flat(),c=l.length>0?l.filter((e=>e>0&&e<1)):Array.from({length:9},((e,t)=>(t+1)/10));if(n.a<s.a)return null;if(n.a>s.a)if(1===n.a)o.push(n);else if(0===s.a)o.push(n);else{const e=(n.a-s.a)/(1-s.a);try{o.push(i(e))}catch(e){return null}}else if(n.a===s.a)if(0===n.a)o.push(new R("transparent"));else if(n.a<1){if(!R.same(n,s))return null;o.push(new R("transparent"))}else{R.same(n,s)&&o.push(new R("transparent"));for(const e of c)try{o.push(i(e))}catch(e){continue}o.push(n)}let h=l.length>0?o.filter((e=>l.includes(e.a))):o;return r&&(h=h.filter((e=>e.a>0))),0===h.length?null:1===h.length?h[0]:h}whatToBlend(e,t){return R.whatToBlend(this,e,t)}static contrast(e,t,{method:a="APCA"}={}){const r=R.makeInstance(t);if(r.a<1)throw"The contrast with a transparent background color would be meaningless";let s=R.makeInstance(e);switch(s.a<1&&(s=R.blend(r,s)),a.toLowerCase()){case"wcag3":case"sapc":case"apca":return d(s.values,r.values);case"wcag2":default:return p(s.values,r.values)}}contrast(e,t={}){return R.contrast(this,e,t)}bestColorScheme(e="background"){const t=[...this.toGamut("srgb"),this.a];if("text"===e){return Math.abs(R.contrast(t,"black",{method:"apca"}))>=Math.abs(R.contrast(t,"white",{method:"apca"}))?"dark":"light"}return Math.abs(R.contrast("black",t,{method:"apca"}))>=Math.abs(R.contrast("white",t,{method:"apca"}))?"light":"dark"}improveContrast(e,t,{lower:a=!1,colorScheme:r=null,method:s="APCA"}={}){const n=R.makeInstance(e),o=n.valuesTo("oklab"),i=this.valuesTo("oklab");let l,c=R.contrast(this,n,{method:s});if(l=c>t?-1:c<t?1:0,l<0&&!1===a||0===l)return this;const h=r||(o[0]<i[0]?"dark":"light"),u=R.contrast(n,"black",{method:s}),f=R.contrast(n,"white",{method:s}),g=l>0?Math.abs(u)>=t:Math.abs(u)<=t,b=l>0?Math.abs(f)>=t:Math.abs(f)<=t;let p;if(g&&!b)p=-1;else if(b&&!g)p=1;else{if(!b&&!g)return new R("light"===h?"black":"white");p="light"===h&&l>0?-1:"light"===h&&l<0||"dark"===h&&l>0?1:-1}let d=p>0?i[0]:0,m=p>0?1:i[0];for(;m-d>1e-4;){const e=(d+m)/2,a=i;a[0]=e;const r=R.contrast(R.convert("oklab","srgb",a),n,{method:s});(l>0?Math.abs(r)<t:Math.abs(r)>t)?p>0?d=e:m=e:p>0?m=e:d=e,i[0]=e}let k=new R(R.convert("oklab","srgb",i));return Math.abs(R.contrast(k,n,{method:s}))<t&&(i[0]=p>0?m:d),new R(R.convert("oklab","srgb",i))}static distance(e,t,{method:a="deltaE2000"}={}){const r=R.makeInstance(e),s=R.makeInstance(t);switch(a){case"CIEDE2000":case"deltaE2000":{const[e,t]=[r,s].map((e=>e.valuesTo("lab")));return w(e,t)}case"deltaEOK":{const[e,t]=[r,s].map((e=>e.valuesTo("oklab")));return k(e,t)}case"euclidean":default:{const[e,t]=[r,s].map((e=>e.values));return k(e,t)}}}distance(e,t={}){return R.distance(this,e,t)}static same(e,t,{tolerance:a=1,method:r="deltaE2000"}={}){return!(R.distance(e,t,{method:r})>a)}same(e,t={}){return R.same(this,e,t)}static gradient(e,a,r=5,s="lch"){const n=R.makeInstance(e),o=R.makeInstance(a),i=Math.max(1,r),l=[...R.propertiesOf(s),"a"],c=R.getSpace(s),h=[...n.valuesTo(c),n.a],u=[...o.valuesTo(c),o.a],f=l.map(((e,t)=>{let a;switch(e){case"h":case"cieh":case"okh":const e=((u[t]-h[t])%360+360)%360,r=((h[t]-u[t])%360+360)%360;a=(e<=r?e:-r)/i;break;default:a=(u[t]-h[t])/i}return a})),g=[h];for(let e=1;e<i;e++){let a=g[e-1],r=l.map(((e,r)=>{let s=a[r]+f[r];return["h","cieh"].includes(e)?t(s):s}));const s=r[3];r=R.toGamut(c,r.slice(0,3),c),r=[...r,s],g.push(r)}return[...g.map((e=>new R(R.convert(c,"srgb",e)))),o]}gradient(e,t,a){return R.gradient(this,e,t,a)}static propertiesOf(e){switch(e){case"rgb":case"rgba":return["r","g","b"];case"hsl":case"hsla":return["h","s","l"];case"hwb":return["h","w","bk"];case"lab":return["ciel","ciea","cieb"];case"lch":return["ciel","ciec","cieh"];case"oklab":return["okl","oka","okb"];case"oklch":return["okl","okc","okh"];default:return[]}}static get properties(){return["a","r","g","b","h","s","l","w","bk","ciel","ciea","cieb","ciec","cieh","okl","oka","okb","okc","okh"]}static get colorSpaces(){return S}static getSpace(e){let t;if("string"!=typeof e)t=e;else{const a="rgb"===e||"rgba"===e?"srgb":"hsla"===e?"hsl":e;t=R.colorSpaces.find((e=>e.id==a))}if(null==t)throw`${e} is not a supported color space`;return t}static get formats(){return I}static get couleursNommees(){return O}}class A{colors=[];constructor(e,t=(()=>[]),{clampSpace:a="srgb"}={}){const r=t(e);for(const e of r){const t=[];for(const r of e.lightnesses){let s=R.convert("oklch","srgb",[r,e.chroma,e.hue]);null!=a&&(s=R.toGamut(a,s));const n=new R(`color(srgb ${s.join(" ")})`);t.push(n)}this.colors.push(t)}}}export default R;export{N as CSSFormats,S as ColorSpaces,m as Contrasts,u as Conversions,$ as Distances,g as Graph,x as OklabGamut,A as Palette,r as Utils,O as namedColors};
